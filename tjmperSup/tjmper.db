record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
    field(PINI, "YES")
}

record(bo, "$(P)DISABLE")
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}

record(longin, "$(P)ID")
{
    field(DESC, "The ID of the device")
    info(archive, "VAL")
}

record(mbbi, "$(P)MODE")
{
    field(DESC, "The current mode of operation")
    field(ZRST, "Home")
    field(ONST, "Block 1")
    field(TWST, "Block 2")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(mbbi, "$(P)LMT")
{
    field(DESC, "Details of the blocksâ€™ positions")
    field(ZRST, "All out")
    field(ONST, "PLT1EN PLT2HM SMPLEN")
    field(TWST, "PLT1HM PLT2EN SMPLEN")
    field(THST, "PLT1EN PLT2HM SMPLHM")
    field(FRST, "PLT1HM PLT2EN SMPLHM")
    field(FVST, "Plate1 moving")
    field(SXST, "Plate2 moving")
    field(SVST, "PLT1EN sample moving")
    field(EIST, "PLT2EN sample moving")
    field(NIST, "SMPL stop PLT out")
    field(TEST, "Not possible")
    field(ELST, "Two plates moving")
}

record(mbbi, "$(P)BLOCK1:POS")
{
    field(DESC, "The position of block 1")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(mbbi, "$(P)BLOCK2:POS")
{
    field(DESC, "The position of block 2")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(mbbi, "$(P)SAMPLE:POS")
{
    field(DESC, "The position of the sample")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(mbbi, "$(P)AIR")
{
    field(DESC, "The status of the air supply")
    field(ZRST, "Off Dumped")
    field(ONST, "Off Valve Reset")
    field(TWST, "On Dumped")
    field(THST, "On Valve Reset")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(mbbi, "$(P)ERR")
{
    field(DESC, "Any error that is present")
    field(ZRST, "No Error (Operational)")
    field(ONST, "PLT1 Homing TMO")
    field(TWST, "PLT1 Engaging TMO")
    field(THST, "PLT1EN SMPL Homing TMO")
    field(FRST, "PLT1EN SMPL Engaging TMO")
    field(FVST, "PLT2 Homing TMO")
    field(SXST, "PLT2 Engaging TMO")
    field(SVST, "PLT2EN SMPL Homing TMO")
    field(EIST, "PLT2EN SMPL Engaging TMO")
    info(alarm, "TJMPER")
    info(interest, "HIGH")
    info(archive, "VAL")
}

record(ai, "$(P)STAT:_SCAN")
{
    field(SCAN, "1 second")
    field(DTYP, "stream")
    field(INP, "@tjmper.proto getStatus($(P)STAT:_RAW) $(PORT)")
}

record(calcout, "$(P)STAT:_RAW")
{
    field(CALC, "0")
    field(FLNK, "$(P)STAT:_FANOUT")
}

record(seq, "$(P)STAT:_FANOUT")
{
    field(DOL1, "$(P)STAT:_RAW.A")
    field(DOL2, "$(P)STAT:_RAW.B")
    field(DOL3, "$(P)STAT:_RAW.C")
    field(DOL4, "$(P)STAT:_RAW.D")
    field(DOL5, "$(P)STAT:_RAW.E")
    field(LNK1, "$(P)ID PP")
    field(LNK2, "$(P)MODE PP")
    field(LNK3, "$(P)LMT PP")
    field(LNK4, "$(P)AIR PP")
    field(LNK5, "$(P)ERR PP")
}

record(mbbo, "$(P)MODE:SP")
{
    field(DESC, "Set the running mode")
    field(DTYP, "stream")
    field(OUT, "@tjmper.proto setMode() $(PORT)")
    field(ZRST, "Home")
    field(ONST, "Block 1")
    field(TWST, "Block 2")
    info(archive, "VAL")
}
